# VS Code Git 圖形化操作手冊

## 文件資訊

| 項目         | 內容         |
| ------------ | ------------ |
| 版本         | 1.0          |
| 建立日期     | 2026-02-06   |
| 適用對象     | ERP 開發團隊 |
| VS Code 版本 | 1.85+        |

---

## 目錄

1. [環境準備](#1-環境準備)
2. [原始碼控制面板介紹](#2-原始碼控制面板介紹)
3. [基本操作](#3-基本操作)
4. [分支管理](#4-分支管理)
5. [變更檢視與比對](#5-變更檢視與比對)
6. [衝突解決](#6-衝突解決)
7. [進階功能](#7-進階功能)
8. [常見問題排解](#8-常見問題排解)

---

## 1. 環境準備

### 1.1 確認 Git 安裝

開啟 VS Code 終端機 (`` Ctrl+` ``) 執行：

```bash
git --version
```

若未安裝，請至 https://git-scm.com/download/win 下載安裝。

### 1.2 初始設定

首次使用需設定使用者資訊：

```bash
git config --global user.name "您的姓名"
git config --global user.email "您的Email"
```

### 1.3 建議安裝的擴充功能

| 擴充功能    | 功能說明                            |
| ----------- | ----------------------------------- |
| GitLens     | 增強 Git 功能，顯示行作者、歷史記錄 |
| Git Graph   | 視覺化分支圖                        |
| Git History | 檔案歷史檢視                        |

安裝方式：按 `Ctrl+Shift+X` 開啟擴充功能市集搜尋安裝。

---

## 2. 原始碼控制面板介紹

### 2.1 開啟原始碼控制面板

**方法一**：點擊左側活動列的 Git 圖示 (分支符號)

**方法二**：快捷鍵 `Ctrl+Shift+G`

### 2.2 面板區域說明

```
┌─────────────────────────────────────┐
│ 原始碼控制 (SOURCE CONTROL)          │
├─────────────────────────────────────┤
│ ⟳ ✓ ⋯  [main ↑1 ↓2]               │  ← 工具列：重新整理、提交、更多選項
├─────────────────────────────────────┤
│ 📝 提交訊息輸入框                    │  ← 輸入提交訊息
├─────────────────────────────────────┤
│ ▼ 暫存的變更 (Staged Changes)       │  ← 已加入暫存區的檔案
│   ├─ file1.cs                       │
│   └─ file2.sql                      │
├─────────────────────────────────────┤
│ ▼ 變更 (Changes)                    │  ← 已修改但未暫存的檔案
│   ├─ file3.cs    M                  │  ← M: 修改
│   ├─ file4.cs    A                  │  ← A: 新增
│   └─ file5.cs    D                  │  ← D: 刪除
└─────────────────────────────────────┘
```

### 2.3 檔案狀態圖示

| 圖示 | 狀態      | 說明         |
| ---- | --------- | ------------ |
| M    | Modified  | 檔案已修改   |
| A    | Added     | 新增的檔案   |
| D    | Deleted   | 已刪除的檔案 |
| U    | Untracked | 未追蹤的檔案 |
| C    | Conflict  | 發生衝突     |
| R    | Renamed   | 已重新命名   |

---

## 3. 基本操作

### 3.1 初始化儲存庫

**情境**：新專案尚未使用 Git

**步驟**：

1. 開啟專案資料夾
2. 按 `Ctrl+Shift+G` 開啟原始碼控制
3. 點擊「初始化儲存庫」按鈕
4. 選擇要初始化的資料夾

### 3.2 複製遠端儲存庫

**步驟**：

1. 按 `Ctrl+Shift+P` 開啟命令面板
2. 輸入「Git: Clone」
3. 貼上儲存庫 URL
4. 選擇本機存放位置
5. VS Code 會自動開啟複製的專案

### 3.3 暫存變更 (Stage)

**單一檔案暫存**：

- 在變更列表中，將滑鼠移到檔案上
- 點擊檔案右側的 `+` 圖示

**全部暫存**：

- 點擊「變更」標題旁的 `+` 圖示
- 或在變更區域右鍵選擇「暫存所有變更」

**快捷鍵**：選取檔案後按 `Enter`

### 3.4 取消暫存 (Unstage)

**單一檔案**：

- 在「暫存的變更」區域
- 點擊檔案右側的 `-` 圖示

**全部取消**：

- 點擊「暫存的變更」標題旁的 `-` 圖示

### 3.5 提交變更 (Commit)

**步驟**：

1. 確認要提交的檔案已暫存
2. 在訊息輸入框輸入提交訊息
3. 按 `Ctrl+Enter` 或點擊 ✓ 圖示提交

**提交訊息格式建議**：

```
[類型] 簡短描述 (72字以內)

詳細說明（選填）
- 修改項目1
- 修改項目2
```

**常用類型**：

- `[feat]` 新功能
- `[fix]` 修復錯誤
- `[docs]` 文件更新
- `[refactor]` 程式碼重構
- `[test]` 測試相關

### 3.6 推送變更 (Push)

**步驟**：

1. 完成提交後
2. 點擊狀態列的同步圖示 (↑↓)
3. 或按 `Ctrl+Shift+P` 輸入「Git: Push」

**狀態列說明**：

- `↑1` 表示有 1 個提交待推送
- `↓2` 表示有 2 個提交待拉取

### 3.7 拉取變更 (Pull)

**步驟**：

1. 點擊狀態列的同步圖示
2. 或按 `Ctrl+Shift+P` 輸入「Git: Pull」

**建議**：定期拉取以避免大量衝突

### 3.8 捨棄變更 (Discard)

**單一檔案**：

- 在檔案上點擊右鍵
- 選擇「捨棄變更」

**全部捨棄**：

- 在「變更」標題上點擊右鍵
- 選擇「捨棄所有變更」

⚠️ **警告**：此操作無法復原！

---

## 4. 分支管理

### 4.1 檢視目前分支

目前分支名稱顯示在：

- 狀態列左下角
- 原始碼控制面板標題

### 4.2 建立新分支

**方法一**：

1. 點擊狀態列的分支名稱
2. 選擇「建立新分支...」
3. 輸入分支名稱

**方法二**：

1. `Ctrl+Shift+P` 開啟命令面板
2. 輸入「Git: Create Branch」
3. 輸入分支名稱

**命名建議**：

```
feature/功能名稱
bugfix/問題描述
hotfix/緊急修復
release/版本號
```

### 4.3 切換分支

**步驟**：

1. 點擊狀態列的分支名稱
2. 從列表選擇要切換的分支

⚠️ **注意**：切換前請確認變更已提交或暫存

### 4.4 合併分支

**步驟**：

1. 先切換到目標分支（如 main）
2. `Ctrl+Shift+P` 開啟命令面板
3. 輸入「Git: Merge Branch」
4. 選擇要合併的來源分支

### 4.5 刪除分支

**本機分支**：

1. `Ctrl+Shift+P` 開啟命令面板
2. 輸入「Git: Delete Branch」
3. 選擇要刪除的分支

**遠端分支**：

```bash
# 在終端機執行
git push origin --delete 分支名稱
```

### 4.6 使用 Git Graph 檢視分支圖

安裝 Git Graph 擴充功能後：

1. 點擊原始碼控制面板的「Git Graph」圖示
2. 或 `Ctrl+Shift+P` 輸入「Git Graph: View Git Graph」

**功能**：

- 視覺化分支歷史
- 點擊提交查看詳情
- 右鍵操作（checkout、merge、cherry-pick 等）

---

## 5. 變更檢視與比對

### 5.1 檢視檔案變更

**方法**：在原始碼控制面板點擊任一變更檔案

**差異檢視**：

```
┌─────────────────┬─────────────────┐
│  原始版本        │  修改後版本      │
│  (紅色背景=刪除) │  (綠色背景=新增) │
└─────────────────┴─────────────────┘
```

### 5.2 切換差異檢視模式

**並排模式** (Side by Side)：

- 點擊差異編輯器右上角的 ⧉ 圖示

**行內模式** (Inline)：

- 點擊差異編輯器右上角的 ≡ 圖示

### 5.3 比對特定版本

**與上一版比對**：

1. 在檔案上右鍵
2. 選擇「開啟變更」

**與特定提交比對**（需 GitLens）：

1. 在檔案上右鍵
2. 選擇「Compare with...」
3. 選擇要比對的提交

### 5.4 檢視檔案歷史

**方法一**（需 GitLens）：

1. 在編輯器中右鍵
2. 選擇「Open File History」

**方法二**：

1. `Ctrl+Shift+P` 輸入「Git: View File History」

### 5.5 行追蹤 (Blame)

**使用 GitLens**：

- 每行程式碼旁會顯示最後修改者和時間
- 將滑鼠移到行末可查看完整提交資訊

---

## 6. 衝突解決

### 6.1 識別衝突

合併或拉取時若發生衝突：

- 檔案會標示 `C` (Conflict)
- 編輯器會顯示衝突標記

### 6.2 衝突標記說明

```
<<<<<<< HEAD
您的程式碼（目前分支）
=======
他人的程式碼（合併來源）
>>>>>>> branch-name
```

### 6.3 使用合併編輯器解決衝突

VS Code 提供三向合併編輯器：

```
┌─────────────────────────────────────────────┐
│ 接受目前變更 │ 接受傳入變更 │ 接受兩者 │ 比對 │
├─────────────────────────────────────────────┤
│ ┌─────────────┐   ┌─────────────┐           │
│ │ 目前變更     │   │ 傳入變更     │           │
│ │ (Current)   │   │ (Incoming)  │           │
│ └─────────────┘   └─────────────┘           │
├─────────────────────────────────────────────┤
│                結果 (Result)                 │
│ 在此編輯最終要保留的程式碼                    │
└─────────────────────────────────────────────┘
```

**操作按鈕**：

- **接受目前變更**：保留您的程式碼
- **接受傳入變更**：使用他人的程式碼
- **接受兩者**：保留雙方程式碼
- **比對**：並排檢視差異

### 6.4 解決衝突步驟

1. 開啟有衝突的檔案
2. 點擊「在合併編輯器中解決」
3. 選擇要保留的變更或手動編輯
4. 確認結果區域的程式碼正確
5. 點擊「完成合併」
6. 暫存並提交解決後的檔案

### 6.5 中止合併

若要放棄此次合併：

1. `Ctrl+Shift+P` 輸入「Git: Abort Merge」
2. 或在終端機執行 `git merge --abort`

---

## 7. 進階功能

### 7.1 暫存工作區 (Stash)

**情境**：需要臨時切換分支但不想提交目前變更

**建立 Stash**：

1. `Ctrl+Shift+P` 輸入「Git: Stash」
2. 輸入 stash 描述（選填）

**套用 Stash**：

1. `Ctrl+Shift+P` 輸入「Git: Apply Stash」
2. 選擇要套用的 stash

**刪除 Stash**：

1. `Ctrl+Shift+P` 輸入「Git: Drop Stash」

### 7.2 Cherry-pick

**情境**：只想合併特定提交

**使用 Git Graph**：

1. 開啟 Git Graph
2. 找到目標提交
3. 右鍵選擇「Cherry Pick Commit」

### 7.3 還原提交 (Revert)

**情境**：需要撤銷某次提交的變更

**步驟**：

1. `Ctrl+Shift+P` 輸入「Git: Revert Commit」
2. 或使用 Git Graph 右鍵選擇「Revert Commit」

### 7.4 修改最後提交 (Amend)

**情境**：提交後發現漏了檔案或訊息有誤

**步驟**：

1. 暫存需要補充的變更
2. `Ctrl+Shift+P` 輸入「Git: Commit (Amend)」

⚠️ **注意**：已推送的提交不建議 amend

### 7.5 標籤管理 (Tag)

**建立標籤**：

1. `Ctrl+Shift+P` 輸入「Git: Create Tag」
2. 輸入標籤名稱（如 v1.0.0）

**推送標籤**：

```bash
git push origin 標籤名稱
# 或推送所有標籤
git push origin --tags
```

### 7.6 互動式暫存

**情境**：只想提交檔案中的部分變更

**步驟**：

1. 在差異檢視中選取要暫存的行
2. 右鍵選擇「暫存選取的範圍」
3. 或使用行號旁的 `+` 圖示暫存該區塊

---

## 8. 常見問題排解

### 8.1 Git 未偵測到

**問題**：VS Code 顯示「找不到 Git」

**解決方案**：

1. 確認 Git 已安裝
2. 設定 Git 路徑：
   - 開啟設定 (`Ctrl+,`)
   - 搜尋 `git.path`
   - 輸入 Git 執行檔完整路徑

### 8.2 認證失敗

**問題**：推送或拉取時認證錯誤

**解決方案**：

1. 檢查 Windows 認證管理員中的 Git 認證
2. 重新設定認證：
   ```bash
   git config --global credential.helper manager
   ```
3. 下次操作時重新輸入帳密

### 8.3 大量變更載入緩慢

**問題**：專案有大量檔案時 Git 面板反應慢

**解決方案**：

1. 新增 `.gitignore` 排除不需追蹤的檔案
2. 常見排除項目：
   ```
   bin/
   obj/
   packages/
   node_modules/
   *.user
   *.suo
   ```

### 8.4 中文檔名亂碼

**問題**：中文檔名顯示為亂碼

**解決方案**：

```bash
git config --global core.quotepath false
```

### 8.5 換行符號問題

**問題**：Windows 和其他系統協作時的換行符號衝突

**解決方案**：

```bash
# Windows 環境建議設定
git config --global core.autocrlf true
```

### 8.6 無法推送到遠端

**問題**：推送時顯示被拒絕

**可能原因與解決**：

1. 遠端有新提交 → 先執行拉取
2. 分支保護規則 → 確認權限或使用 Pull Request
3. 強制推送（謹慎使用）：
   ```bash
   git push --force-with-lease
   ```

---

## 快捷鍵速查表

| 操作           | 快捷鍵                     |
| -------------- | -------------------------- |
| 開啟原始碼控制 | `Ctrl+Shift+G`             |
| 開啟命令面板   | `Ctrl+Shift+P`             |
| 提交           | `Ctrl+Enter`（在訊息框中） |
| 開啟終端機     | `` Ctrl+` ``               |
| 開啟設定       | `Ctrl+,`                   |
| 快速開啟檔案   | `Ctrl+P`                   |

---

## 附錄：推薦工作流程

### 日常開發流程

```
1. 開始工作前
   └─ Pull 最新程式碼

2. 開發功能
   ├─ 建立 feature 分支
   ├─ 編寫程式碼
   └─ 定期小提交

3. 完成功能
   ├─ 確認所有變更已提交
   ├─ Push 到遠端
   └─ 發起 Pull Request

4. 程式碼審查
   └─ 根據回饋修改

5. 合併
   └─ 刪除 feature 分支
```

### 緊急修復流程

```
1. 從 main 建立 hotfix 分支
2. 修復問題
3. 提交並推送
4. 合併回 main 和 develop
5. 建立版本標籤
```

---

# 先回到 main

git checkout main

# 用 revert 方式處理

git revert --no-commit 28141421..HEAD
git commit -m "回復到 initial commit"

_文件結束_
